@startuml
'http://plantuml.com/skinparam.html
skinparam monochrome true
skinparam packageStyle rect
skinparam shadowing false


participant BuildingConnectionRoute  as route
participant BuildingConnectionController as controller
participant BuildingConnectionService as service
participant BuildingConnection as domain
participant BuildingConnectionMap as mapper
participant BuildingConnectionRepo as repo
participant FloorMap as mapperFloor
participant FloorRepo as repoFloor



-> route: Get /buildingConnections / (json)
activate route
  route -> controller: listBuildingConnection(json)
  activate controller
    controller -> service: listBuildingConnection(json as IBuildingDTO)
    activate service
    service -> repo: findAll()
    activate repo
    loop (for each buildingConnection)
    repo -> mapper: Map2Model(buildingConnection)
    activate mapper
    mapper --> repo: buildingConnection
    deactivate
    end loop
    repo --> service: buildingConnectionList
    deactivate
    service -> repoFloor: findByDomainId(buildingConnection.floor1Id)
    activate repoFloor
    repoFloor -> mapperFloor: Map2Model(floor1Data)
    activate mapperFloor
    mapperFloor --> repoFloor: floor1
    deactivate
    repoFloor --> service: floor1
    deactivate
    service -> repoFloor: findByDomainId(buildingConnectionDTO.floor2Id)
    activate repoFloor
    repoFloor -> mapperFloor: Map2Model(floor2Data)
    activate mapperFloor
    mapperFloor --> repoFloor: floor2
    deactivate
    repoFloor --> service: floor2
    deactivate
    service --> controller: buildingConnectionDTOList
    deactivate
    controller --> route: response(buildingConnectionDTOList as json)
    deactivate
    <-- route: response
    deactivate

@enduml